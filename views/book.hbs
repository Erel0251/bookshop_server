{{> sidebar}}
<!-- component -->

<div class="col container-fluid">

  <div class="d-flex justify-content-between align-items-center m-4">
    <h2 class="text-left">Book Inventory</h2>
    <div class="d-flex justify-content-evenly gap-3">
      <div class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#createBook">Create</div>
      <div class="btn btn-outline-success">Import</div>
    </div>
  </div>


  <form action="/book" method="get" class="card p-4 m-4" id="queryBook">
    <div class="row">
      <div class="col-md-4 mb-3">
        <label for="filterTitle">Title</label>
        <input type="text" id="filterTitle" class="form-control" placeholder="Search by Title" name="title">
      </div>
      <div class="col-md-4 mb-3">
        <label for="filterAuthor">Author</label>
        <input type="text" id="filterAuthor" class="form-control" placeholder="Search by Author" name="publisher">
      </div>
      <div class="col-md-4 mb-3">
        <label for="filterPublisher">Publisher</label>
        <input type="text" id="filterPublisher" class="form-control" placeholder="Search by Publisher" name="publisher">
      </div>
      <div class="col-md-6 mb-3">
        <label for="filterISBN">ISBN</label>
        <input type="text" id="filterISBN" class="form-control" placeholder="Search by ISBN" name="isbn">
      </div>
      <div class="col-md-6 mb-3">
        <label for="filterStatus">Status</label>
        <select id="filterStatus" name="status" form="queryBook" class="form-select">
          {{#each statuses}}
          <option value="{{this}}">{{formatName this}}</option>
          {{/each}}
        </select>
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
  </form>

  <div class="m-3">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Image</th>
          <th>Title</th>
          <th>Author</th>
          <th>Publisher</th>
          <th>ISBN</th>
          <th>Price</th>
          <th>Status</th>
          <th>Currency</th>
          <th>Inventory</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="bookTable">
        <!-- Add more rows as needed -->
        {{#each books}}
        <tr data-book-id="{{id}}">
          <td><img src="{{img_urls.[0]}}" class="img-thumbnail cover-image" alt="Book Image"></td>
          <td class="editable">{{formatName title}}</td>
          <td class="editable">{{formatName author}}</td>
          <td class="editable">{{formatName publisher}}</td>
          <td class="editable">{{isbn}}</td>
          <td class="editable" data-price="{{price}}">{{formatPrice price currency}}</td>
          <td class="editable">{{formatName status}}</td>
          <td class="editable">{{currency}}</td>
          <td>{{inventory}}</td>
          <td>
            <button class="btn btn-outline-primary editBtn" data-bs-toggle="modal" data-bs-target="#editBook">Edit</button>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</div>

{{> book/createBook}}
{{> book/editBook}}